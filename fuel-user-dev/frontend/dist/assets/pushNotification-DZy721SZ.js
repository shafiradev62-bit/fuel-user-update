var n=Object.defineProperty;var s=(o,e,i)=>e in o?n(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var t=(o,e,i)=>s(o,typeof e!="symbol"?e+"":e,i);import{a}from"./index-C6zoZ9mA.js";class c{constructor(){t(this,"vapidKey","")}async requestPermission(){try{return"Notification"in window?await Notification.requestPermission()==="granted":!1}catch(e){return console.error("Error requesting notification permission:",e),!1}}async getRegistrationToken(){try{return console.warn("Firebase messaging temporarily disabled"),null}catch(e){return console.error("Error getting registration token:",e),null}}async initializePushNotifications(e){try{if(!("Notification"in window))return console.warn("This browser does not support notifications"),null;if(!await this.requestPermission())return console.warn("Notification permission denied"),null;const r=await this.getRegistrationToken();return r&&e&&(await this.registerTokenWithBackend(e,r),this.setupForegroundMessageListener(),this.registerServiceWorker()),r}catch(i){return console.error("Error initializing push notifications:",i),null}}async registerTokenWithBackend(e,i){try{const r=this.getDeviceType();await a(e,i,r),console.log("FCM token registered with backend")}catch(r){console.error("Error registering FCM token with backend:",r)}}getDeviceType(){const e=navigator.userAgent;return/Android/i.test(e)?"android":/iPhone|iPad|iPod/i.test(e)?"ios":"web"}setupForegroundMessageListener(){console.log("Foreground message listener disabled for build")}async registerServiceWorker(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",e)}}catch(e){console.error("Service Worker registration failed:",e)}}showNotification(e,i,r){Notification.permission==="granted"&&new Notification(e,{body:i,icon:r||"/logo.png",badge:"/logo.png",tag:"fuelfriendly-notification"})}async sendTestNotification(){try{return this.showNotification("Test Notification","Push notifications are working!","/logo.png"),!0}catch(e){return console.error("Error sending test notification:",e),!1}}getPermissionStatus(){return Notification.permission}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}}const u=new c;export{u as pushNotificationService};
